<!DOCTYPE html>
<html>
<head>
<title></title>

<style type="text/css">
  canvas {
    border: 2px solid black;
    background-color: red;
  }
</style>

</head>
<body>

<canvas  id="myCanvas" height="500" width="1000"> // set up canvas
</canvas>

<script type='text/javascript'>

var canvas = document.getElementById('myCanvas');
var ctx = canvas.getContext('2d'); // get context from canvas object
let screenWidth = 1000;
let screenHeight = 500;

class gameChar { // class for game character
  constructor(x,y,wid,hi,col,speed){
    this.x=x;
    this.y=y;
    this.wid=wid;
    this.hi=hi;
    this.col=col;
    this.speed=speed;
  }
    move(xAmount,yAmount){
      this.x+=xAmount;
      this.y+=yAmount;
    }
}

var bang=false;
var xoff=250;
var yoff=100;
var baddie=[]; // declare array before assigning below.

for (i=1;i<4;i++){ // create baddies from gameBaddie class
  baddie[i] = new gameChar((i*xoff),(i*yoff),50,50,"rgb(0,0,255)",3);
}

player = new gameChar(100,200,50,50,"rgb(0,255,0)",0); // create player

document.onkeydown = function(event){
  let keyPressed=event.keyCode;
  if(keyPressed==88){
    player.speed=3;
  }
  else if(keyPressed==90){
    player.speed=(-3);
  }
}

document.onkeyup = function(event){
  player.speed=0;
}

var draw = function(){ // function draw baddies
  ctx.clearRect(0,0,screenWidth,screenHeight);
  ctx.fillStyle = player.col;
  ctx.fillRect(player.x, player.y, player.wid, player.hi);
  baddie.forEach (function(element){ // this is just blah.foreach(someFunction{someCode}), see updateAndMove
  ctx.fillStyle = element.col;
  ctx.fillRect(element.x, element.y, element.wid, element.hi);
})
}

 /* Could also use:
  for (i=1;i<4;i++){
  ctx.fillStyle = baddie[i].col;
  ctx.fillRect(baddie[i].x, baddie[i].y, baddie[i].wid, baddie[i].hi);
  }} */

var update = function(){ // // function to update and move player & baddies
  player.move(player.speed,0);

  function updateAndMove(element){ // this time declare function outside of forEach
    element.move(0,element.speed); // performs same as forEach in the draw() function
    if (element.y>=445){
      element.speed=(-3);
        }
      else if (element.y<=5){
        element.speed=3;
      }}

      function checkCollide(rect){
      var xOver=Math.abs(player.x - rect.x) <= 50;
      var yOver=Math.abs(player.y - rect.y) <= 50;
      bang = (xOver && yOver);
    }

baddie.forEach(updateAndMove); //Call function updateAndMove for each object
baddie.forEach(checkCollide); //Call function collission detection

if(bang){
  alert("BANG!");
}
}

var step= function(){ // main game loop
  update();
  draw();
  window.requestAnimationFrame(step);
  }
step();

</script>

</body>
</html>
